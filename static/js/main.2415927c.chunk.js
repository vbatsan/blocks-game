(this["webpackJsonpblocks-game"]=this["webpackJsonpblocks-game"]||[]).push([[0],{38:function(t,n,e){},62:function(t,n,e){"use strict";e.r(n);var r=e(1),a=e(0),i=e.n(a),c=e(11),o=e.n(c),u=(e(38),e(2)),s=e(4),b=e(5),l="SET_SETTINGS",d="START_GAME",p="FINISH_GAME",f="CLEAR_FIELD",j="USER_INC",O="COMPUTER_INC",x="SET_BLOCKS",h="NEW_GAME",v="CHANGE_BLOCK_TYPE",g="ACTIVE_TO_RED",m="FILTER_PLAYING_BLOCKS",y="NO_ACTIVE",k="ACTIVE",w="GREEN",E="RED",C=function(t){return function(n){t.type===k&&(n(function(t){return{type:m,payload:t}}(t.id)),n({type:g})),t.type===w&&n({type:j}),n({type:v,payload:t})}};function S(){var t=Object(s.a)(["\n    width: 50px;\n    height: 50px;\n    box-sizing: border-box;\n    background-color: ",";\n    border: 1px solid black;\n"]);return S=function(){return t},t}var _=b.a.div(S(),(function(t){switch(t.type){case k:return"#46b5ff";case y:return"#5dffca";case E:return"#ff2b3b";case w:return"#229517";default:return"#5dffca"}}));var F=function(t){var n=t.id,e=t.type,a=Object(u.b)();return Object(r.jsx)(_,{type:e,onClick:function(){e===k&&a(C({id:n,type:w}))}})};function N(){var t=Object(s.a)(["\n    display: flex;\n    flex-wrap: wrap;\n    margin: 40px 0;\n    width: ","px\n"]);return N=function(){return t},t}var I=b.a.div(N(),(function(t){var n=t.blocks;return 50*Math.sqrt(n)})),T=function(t){return t.app.isGameFinish},G=function(t){return t.app.isGameStarted},A=function(t){return t.app.userName},B=function(t){return t.app.userCount},M=function(t){return t.app.computerCount},R=function(t){return t.app.settings},L=function(t){return t.app.blocks},D=function(t){return t.app.playingBlocks},P=function(t){return t.app.clearField},W=function(t){return t.app.settings.field};var z=function(t){var n=t.settings,e=Object(u.c)(G),i=Object(u.c)(D),c=Object(u.c)(P),o=Object(u.c)(L),s=Object(u.b)();return Object(a.useEffect)((function(){for(var t,e=[],r=0;r<n.field*n.field;r++){var a={id:r,type:y};e.push(a)}s((t=e,function(n){n({type:x,payload:t})}))}),[n.field,c]),Object(a.useEffect)((function(){if(e&&i.length>0){var t=(c=i.length,Math.floor(Math.random()*c)),r=i[t].id,a=setTimeout((function(){s(C({id:r,type:k}))}),n.delay);return function(){return clearTimeout(a)}}var c}),[i,e]),Object(r.jsx)(I,{blocks:o.length,children:o.map((function(t){return Object(r.jsx)(F,{id:t.id,type:t.type},t.id)}))})};function V(){var t=Object(s.a)(["\n    max-width: 1600px;\n    margin: 0 auto;\n"]);return V=function(){return t},t}var H=b.a.div(V()),U=e(8);function K(){var t=Object(s.a)(["\n    border: 1px solid black;\n    display: inline-block;\n    background: none;\n    outline: none;\n    font-size: 18px;\n    border-radius: 5px;\n    width: 200px;\n    padding: 15px;\n    margin: 0 10px\n"]);return K=function(){return t},t}var Y=b.a.select(K());function J(){var t=Object(s.a)(["\n    background: none;\n    border: ",";\n    padding: 15px;\n    width: 200px;\n    font-size: 18px;\n    border-radius: 5px;\n    outline: none;\n    margin: 0 10px\n"]);return J=function(){return t},t}var X=b.a.input(J(),(function(t){return t.isError?"1px solid red":"1px solid black"}));function q(){var t=Object(s.a)(["\n    padding: 15px;\n    background: none;\n    outline: none;\n    border: 1px solid black;\n    cursor: pointer;\n    font-size: 18px;\n    transition: .3s;\n    width: 300px;\n    border-radius: 5px;\n    background-color: #C9FFBF;\n    &:hover {\n        background-color: #FFE9A0\n    }\n    \n"]);return q=function(){return t},t}var Q=b.a.button(q()),Z=e(29),$=e(30),tt=e(12),nt=e.n(tt),et=new(function(){function t(){Object(Z.a)(this,t)}return Object($.a)(t,[{key:"getSettings",value:function(){return nt()("https://starnavi-frontend-test-task.herokuapp.com/game-settings").then((function(t){return t.data}))}},{key:"getWinners",value:function(){return nt()("https://starnavi-frontend-test-task.herokuapp.com/winners").then((function(t){return t.data}))}},{key:"sendWinner",value:function(t){return nt.a.post("https://starnavi-frontend-test-task.herokuapp.com/winners",t).then((function(t){return t.data}))}}]),t}());function rt(){var t=Object(s.a)(["\n    display: flex;\n    width: 100%;\n    justify-content: ",";\n    align-items: ",";\n    flex-direction: ",";\n    flex: ","\n"]);return rt=function(){return t},t}var at=b.a.div(rt(),(function(t){var n=t.justify;return n||"start"}),(function(t){var n=t.align;return n||"start"}),(function(t){var n=t.direction;return n||"row"}),(function(t){return t.flex}));var it=function(t){var n=t.changeField,e=Object(a.useState)({}),i=Object(U.a)(e,2),c=i[0],o=i[1],s=Object(a.useState)(!0),b=Object(U.a)(s,2),l=b[0],p=b[1],j=Object(a.useState)(""),O=Object(U.a)(j,2),x=O[0],h=O[1],v=Object(a.useState)(!1),g=Object(U.a)(v,2),m=g[0],y=g[1],k=Object(u.b)(),w=Object(a.useRef)(),E=Object(a.useCallback)((function(){return k((function(t){return t({type:f})}))}),[k]);function C(){var t;x.length<1?y(!0):""!==w.current.value?(E(),k((t=x,function(n){n({type:d,payload:t})})),p(!1)):w.current.style.border="1px solid red"}return Object(a.useEffect)((function(){et.getSettings().then((function(t){return o(t)}))}),[]),Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(at,{justify:"center",children:[Object(r.jsxs)(Y,{ref:w,defaultValue:"",onChange:function(t){w.current.style.border="1px solid black",n(c[t.target.value]),E()},children:[Object(r.jsx)("option",{disabled:!0,value:"",children:"Choose level"}),Object.keys(c).map((function(t){return Object(r.jsx)("option",{value:t,children:t.toUpperCase()},t)}))]}),Object(r.jsx)(X,{isError:m,placeholder:"Your name",value:x,onChange:function(t){return n=t.target.value,h(n),y(!1),void(n!==x&&p(!0));var n}}),Object(r.jsx)(Q,{onClick:function(){return C()},children:l?"Play":"Play again"})]})})};function ct(){var t=Object(s.a)(["\n    padding: 10px;\n    text-align: center;\n    font-weight: bold;\n    font-size: 18px\n"]);return ct=function(){return t},t}var ot=b.a.p(ct());var ut=function(){var t=Object(u.c)(B),n=Object(u.c)(M),e=Object(u.c)(W),i=Object(u.c)(T),c=Object(u.c)(A),o=Object(u.b)();return Object(a.useEffect)((function(){(n>e*e/2||t>e*e/2)&&o((function(t){return t({type:p})}))}),[t,n]),i&&Object(r.jsxs)(ot,{children:[t>n?c:"Computer"," won!"]})},st=e(31),bt=e.n(st);function lt(){var t=Object(s.a)(["\n\t  display: block;\n      position: relative;\n      left: 50%;\n      top: 50%;\n      width: 150px;\n      height: 150px;\n      margin: -75px 0 0 -75px;\n      border-radius: 50%;\n      border: 3px solid transparent;\n      border-top-color: #9370DB;\n      -webkit-animation: spin 2s linear infinite;\n      animation: ",' 2s linear infinite;\n      &:after {\n      \t content: "";\n\t\t position: absolute;\n\t\t top: 15px;\n\t\t left: 15px;\n\t\t right: 15px;\n\t\t bottom: 15px;\n\t\t border-radius: 50%;\n\t\t border: 3px solid transparent;\n\t\t border-top-color: rgb(11, 156, 100);\n\t\t -webkit-animation: spin 1.5s linear infinite;\n\t\t animation: ',' 1.5s linear infinite;\n      };\n      &:before {\n      \t content: "";\n\t\t position: absolute;\n\t\t top: 5px;\n\t\t left: 5px;\n\t\t right: 5px;\n\t\t bottom: 5px;\n\t\t border-radius: 50%;\n\t\t border: 3px solid transparent;\n\t\t border-top-color: rgb(17, 211, 201);\n\t\t -webkit-animation: spin 3s linear infinite;\n\t\t animation: '," 3s linear infinite;\n      }\n"]);return lt=function(){return t},t}function dt(){var t=Object(s.a)(["\n\t position: absolute;\n     top: 0;\n     left: 0;\n     width: 100%;\n     height: 100%;\n"]);return dt=function(){return t},t}function pt(){var t=Object(s.a)(["\n\t0% {\n         -webkit-transform: rotate(0deg);\n         -ms-transform: rotate(0deg);\n         transform: rotate(0deg);\n      }\n    100% {\n         -webkit-transform: rotate(360deg);\n         -ms-transform: rotate(360deg);\n         transform: rotate(360deg);\n      }\n"]);return pt=function(){return t},t}var ft=Object(b.b)(pt()),jt=b.a.div(dt()),Ot=b.a.div(lt(),ft,ft,ft),xt=function(){return Object(r.jsx)(jt,{children:Object(r.jsx)(Ot,{})})};function ht(){var t=Object(s.a)(["\n    max-width: 450px;\n    min-width: 375px;\n    height: 80vh;\n    position: relative;\n    padding: 20px;\n    background-color: rgba(255,255,255, .4);\n    overflow-y: scroll;\n"]);return ht=function(){return t},t}var vt=b.a.div(ht());function gt(){var t=Object(s.a)(["\n    text-align: center;\n"]);return gt=function(){return t},t}var mt=b.a.h2(gt());var yt=function(){var t=Object(a.useState)([]),n=Object(U.a)(t,2),e=n[0],i=n[1],c=Object(a.useState)(!1),o=Object(U.a)(c,2),s=o[0],b=o[1],l=Object(u.c)(T),d=Object(u.c)(B),p=Object(u.c)(M),f=Object(u.c)(A);return Object(a.useEffect)((function(){if(b(!0),l){var t={winner:d>p?f:"Computer",date:bt()(Date.now()).format("llll")};et.sendWinner(t).then((function(){et.getWinners().then((function(t){i(t),b(!1)}))}))}else et.getWinners().then((function(t){i(t),b(!1)}))}),[l]),Object(r.jsxs)(vt,{children:[Object(r.jsx)(mt,{children:"Leader bord"}),s&&Object(r.jsx)(xt,{}),Object(r.jsx)("ul",{className:"list",children:null===e||void 0===e?void 0:e.map((function(t){return Object(r.jsxs)("li",{className:"list-item",children:[Object(r.jsx)("span",{children:t.winner}),Object(r.jsx)("span",{children:t.date})]},t.id)}))})]})};var kt=function(){var t=Object(u.c)(R),n=Object(u.b)(),e=Object(a.useCallback)((function(t){return n(function(t){return{type:l,payload:t}}(t))}),[n]);return Object(r.jsx)(H,{children:Object(r.jsxs)(at,{children:[Object(r.jsxs)(at,{fustify:"center",direction:"column",align:"center",flex:1,children:[Object(r.jsx)(it,{changeField:e}),Object(r.jsx)(ut,{}),t&&Object(r.jsx)(z,{settings:t})]}),Object(r.jsx)(yt,{})]})})},wt=e(32),Et=e(7),Ct=e(3),St={isGameStarted:!1,isGameFinish:!1,settings:{field:0,delay:0},userName:"",clearField:!1,userCount:0,computerCount:0,blocks:[],playingBlocks:[]};var _t=Object(Et.c)({app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"FINISH":return Object(Ct.a)(Object(Ct.a)({},t),{},{game:"FINISHED"});case l:return Object(Ct.a)(Object(Ct.a)({},t),{},{settings:n.payload});case d:return Object(Ct.a)(Object(Ct.a)({},t),{},{isGameStarted:!0,isGameFinish:!1,userName:n.payload,userCount:0,computerCount:0,isShowMessage:!1});case p:return Object(Ct.a)(Object(Ct.a)({},t),{},{isGameStarted:!1,isGameFinish:!0,isShowMessage:!0});case f:return Object(Ct.a)(Object(Ct.a)({},t),{},{clearField:!t.clearField});case j:return Object(Ct.a)(Object(Ct.a)({},t),{},{userCount:t.userCount+1});case O:return Object(Ct.a)(Object(Ct.a)({},t),{},{computerCount:t.computerCount+1});case x:return Object(Ct.a)(Object(Ct.a)({},t),{},{blocks:n.payload,playingBlocks:n.payload});case g:return Object(Ct.a)(Object(Ct.a)({},t),{},{blocks:t.blocks.map((function(t){return t.type===k&&(t.type=E),t})),computerCount:t.blocks.filter((function(t){return t.type===E})).length});case m:return Object(Ct.a)(Object(Ct.a)({},t),{},{playingBlocks:t.playingBlocks.filter((function(t){return t.id!==n.payload}))});case v:return Object(Ct.a)(Object(Ct.a)({},t),{},{blocks:t.blocks.map((function(t){return t.id===n.payload.id?Object(Ct.a)(Object(Ct.a)({},t),{},{type:n.payload.type}):t}))});case h:return Object(Ct.a)(Object(Ct.a)({},t),{},{isGameStarted:!1});default:return t}}}),Ft=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Et.d,Nt=Object(Et.e)(_t,void 0,Ft(Object(Et.a)(wt.a)));o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(u.a,{store:Nt,children:Object(r.jsx)(kt,{})})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.2415927c.chunk.js.map